/*jshint -W065 */
var TableAdvanced = (function($){
var tab = $('#approve_1').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
	    var tab = $('#approve_2').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_3').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_4').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_5').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_6').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_7').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_8').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_9').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
var tab = $('#approve_10').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
   
var tab = $('#engage_1').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
}); 
			
var tab = $('#engage_2').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true
                   } );

var tab = $('#engage_3').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true
                   } );

var tab = $('#source_1').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i><'span6'p>>",
"sPaginationType": "full_numbers",
"sLengthMenu": false,
"bLengthChange": false,
"bPaginate": true,
"bSortable": true,
"iDisplayLength":6,
                   } );


	var tab = $('#example_1').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                   } );
	var tab = $('#example_2').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
                  } );
	var tab = $('#example_3').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                  } );
	var tab = $('#example_4').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                  } );
	var tab = $('#example_5').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                   } );
var tab = $('#example_5s').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "115",
"sScrollX": "100%",
                   } );
var tab = $('#example_6s').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "115",
"sScrollX": "100%",
                   } );


var tab = $('#example_6').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                   } );

var tab = $('#example_7').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                   } );

var tab = $('#example_8').dataTable( {
"sDom": "<>t<'row-fluid'<'span6'i>>",
"iDisplayLength": 20,
"bScrollCollapse": true,
"sScrollY": "175",
"sScrollX": "100%",
                   } );

	// Enable automatic storage of json objects into cookie

$.cookie.json = true;

	var oTable, iCol, bVis,
		saveViewModal,
		viewName,
		viewCheckboxes,
		defaultView = {},
		savedViews = $.cookie( 'saved-views' ) || {},
		noSortIndexes = [];

	function _initTable() {
		$('#sample_2 thead > tr > th').each(function( k ){
var $this = $(this); 
			if ( $this.hasClass('no-sort') ) {
				noSortIndexes.push( k );
			}
			defaultView[k] = !$this.hasClass('hidden-default');
}); 

		oTable = $('#sample_2').dataTable({
			aoColumnDefs: [
				{ bSortable: false, aTargets: noSortIndexes }				// Disable sort on the last column i.e Action column.
			],
			aaSorting: [[1, 'asc']],
			aLengthMenu: [
				[5, 10, 15, -1],								// Number of results per page
				[5, 10, 15, "All"]								// Strings to represent number of results
			],
			iDisplayLength: 5									// Initial results per page
		});



		$('#sample_2_wrapper .dataTables_filter input, #sample_2_wrapper .dataTables_length select').addClass('m-wrap medium');
var viewCheckboxes = $("#sample_2_column_toggler input:checkbox");
viewCheckboxes.change(function(e){
			iCol = parseInt($(this).attr("data-column"));
			bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
			oTable.fnSetColumnVis(iCol, (bVis ? false : true));
		});

		$.each( defaultView, function( iCol, bVis ) {
			oTable.fnSetColumnVis( iCol, bVis );
			viewCheckboxes.eq(iCol).prop('checked', bVis).parent()[bVis ? 'addClass' : 'removeClass']();
		} );

		saveViewModal = $('#save-view-as-modal');
		viewName = $('#view-name');

		_initViews();
	}

	function _initViews() {
		var ul = $('#saved-views');

		function _listViews() {
			ul.find('li:gt(0)').remove();
			$.each(savedViews, function( key, view ) {
				ul.append( '<li><a href="#" data-view="' + key + '">' + key + '</a></li>' );
			});
		}
		_listViews();

		saveViewModal.on('submit', 'form', function( e ) {
			e.preventDefault();

			var name = viewName.val(), toSave = {};
			saveViewModal.modal('hide');
			if ( ! name ) {
				return;
			}

			$.each( TableAdvanced.dataTable().fnSettings().aoColumns, function( key, column ) {
				toSave[ key ] = column.bVisible;
			} );

			savedViews[ name ] = toSave;
			viewName.val( '' );
			$.cookie( 'saved-views', savedViews );
			_listViews();
		});

		ul.on('click', 'a', function(e){
			e.preventDefault();
			var v = $(this).data('view');
			if ( ! v ) {
				_setView( defaultView );
			} else {
				_setView( savedViews[ v ] );
			}
		});
	}
	function _setView( obj ) {
var oTable = TableAdvanced.dataTable();
		$.each(obj, function( k, v ) {
			oTable.fnSetColumnVis(k, v);
viewCheckboxes.filter('[data-column="' + k + '"]').prop( 'checked', v ).parent()[ v ? 'addClass' : 'removeClass' ]('checked');
		});
		
	}

	return {
		init: function() {
			if ( ! $().dataTable ) {
				return;
			}

			_initTable();
		},

		dataTable: function() {
			return oTable;
		}
	};

		
})( jQuery );

